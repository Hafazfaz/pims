{% if recipients %}
<div class="mt-4 border border-slate-200 rounded-lg overflow-hidden shadow-sm bg-white">
    <table class="w-full text-left text-[11px]">
        <thead class="bg-slate-50 border-b border-slate-200 text-slate-400 uppercase font-black tracking-widest">
            <tr>
                <th class="px-3 py-2">Username</th>
                <th class="px-3 py-2">Full Name</th>
                <th class="px-3 py-2">Dept/Unit</th>
                <th class="px-3 py-2 text-right">Action</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 font-medium">
            {% for staff in recipients %}
            <tr class="hover:bg-slate-50 transition-colors">
                <td class="px-3 py-3 text-nigeria-green font-bold">{{ staff.user.username }}</td>
                <td class="px-3 py-3 text-slate-900">{{ staff.user.get_full_name|default:"---" }}</td>
                <td class="px-3 py-3 text-slate-500 italic">
                    {{ staff.department.code|default:"" }}{% if staff.unit %} / {{ staff.unit.name }}{% endif %}
                </td>
                <td class="px-3 py-3 text-right">
                    <button type="button"
                        @click="$dispatch('recipient-selected', { id: '{{ staff.user.id }}', username: '{{ staff.user.username }}' })"
                        class="p-1 px-2.5 bg-slate-900 text-white rounded text-[10px] font-bold uppercase tracking-tighter hover:bg-black transition-all">
                        Select
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% elif query %}
<div class="mt-4 p-4 text-center border border-dashed border-slate-200 rounded-lg bg-slate-50">
    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">No eligible recipients matching "{{ query }}"</p>
    <p class="text-[9px] text-slate-400 mt-1 italic">(Only HODs and Unit Managers can receive files)</p>
</div>
{% endif %}
