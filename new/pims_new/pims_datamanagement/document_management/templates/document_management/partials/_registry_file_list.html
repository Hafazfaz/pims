<div id="registry-file-list" class="space-y-6">
  <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="px-8 py-5 border-b border-slate-50 flex justify-between items-center bg-slate-50/50">
      <h3 class="text-sm font-bold text-slate-800 uppercase tracking-tight flex items-center gap-2">
        <i class="fas fa-folder-open text-nigeria-green"></i>
        Active Records (Active Files)
      </h3>
      <div class="flex gap-2" id="search-indicator" class="htmx-indicator">
        <div class="flex items-center gap-2 text-xs font-bold text-slate-400">
          <svg class="animate-spin h-4 w-4 text-nigeria-green" xmlns="http://www.w3.org/2000/svg" fill="none"
            viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
            </path>
          </svg>
          Searching...
        </div>
      </div>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-left text-sm border-collapse">
        <thead>
          <tr class="bg-slate-900 text-slate-400 uppercase text-[10px] font-bold tracking-widest">
            <th class="px-8 py-5">File Number & Title</th>
            <th class="px-8 py-5">Type</th>
            <th class="px-8 py-5">Current Custodian</th>
            <th class="px-8 py-5">Status</th>
            <th class="px-8 py-5 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 font-medium">
          {% for file in files %}
          <tr class="hover:bg-slate-50 transition-colors">
            <td class="px-8 py-6">
              <div class="font-bold text-nigeria-green">
                {{ file.file_number }}
              </div>
              <div class="text-slate-900 mt-1 font-semibold">
                {{ file.title }}
              </div>
            </td>
            <td class="px-8 py-6">
              <span class="text-[10px] font-bold text-slate-500 uppercase">{{ file.get_file_type_display }}</span>
            </td>
            <td class="px-8 py-6">
              {% if file.current_location %}
              <div class="font-bold text-slate-900 text-xs">
                {{ file.current_location.user.get_full_name }}
              </div>
              <div class="text-[10px] text-slate-500 uppercase">
                {{ file.current_location.department.name }}
              </div>
              {% else %}
              <span class="text-slate-400 italic text-xs">Pending Archive</span>
              {% endif %}
            </td>
            <td class="px-8 py-6">
              <span
                class="text-[9px] font-black px-2.5 py-1 rounded-full uppercase tracking-tighter {% if file.status == 'active' %}bg-green-50 text-green-700 border border-green-100 {% elif file.status == 'pending_activation' %}bg-amber-50 text-amber-700 border border-amber-100 {% else %}bg-slate-50 text-slate-700 border border-slate-100{% endif %}">
                {{ file.get_status_display }}
              </span>
            </td>
            <td class="px-8 py-6 text-right">
              <a href="{% url 'document_management:file_detail' pk=file.pk %}"
                class="inline-flex items-center px-4 py-2 bg-slate-100 text-slate-700 hover:bg-slate-900 hover:text-white rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all">
                Open
              </a>
              {% if user.staff.is_registry or user.is_superuser %}
              <form action="{% url 'document_management:file_delete' pk=file.pk %}" method="post"
                class="inline-block ml-2" onsubmit="
                  return confirm(
                    'WARNING: Are you sure you want to PERMANENTLY DELETE this record folder and all its documents? This action cannot be undone.',
                  );
                ">
                {% csrf_token %}
                <button type="submit"
                  class="inline-flex items-center px-4 py-2 bg-red-50 text-red-600 hover:bg-red-600 hover:text-white rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all border border-red-100">
                  Delete
                </button>
              </form>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="px-8 py-12 text-center text-slate-400 italic">
              {% if selected_search_query %} No records found matching "{{
              selected_search_query }}" {% else %} No active records found in
              the registry. {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% if is_paginated %}
    <div class="bg-white border-t border-slate-100" hx-boost="true">
      {% include 'document_management/partials/_pagination.html' with page_obj=page_obj page_param='page' %}
    </div>
    {% endif %}
  </div>
</div>