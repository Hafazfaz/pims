{% load static %}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PIMS{% endblock %}</title>
    <link rel="icon" href="{% static 'favicon.ico' %}">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind with Custom Configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.8/dist/cdn.min.js" defer></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'nigeria-green': '#008751',
                        'nigeria-dark': '#006B40',
                        'nigeria-light': '#E6F3EE',
                        'gov-green': '#008751',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- Custom Style Overrides -->
    <style>
        [x-cloak] {
            display: none !important;
        }

        /* Quill Editor Styling */
        .ql-container {
            font-family: 'Inter', sans-serif !important;
            font-size: 14px !important;
            min-height: 200px;
        }

        .ql-toolbar {
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
            background: #f8fafc;
        }

        .ql-container {
            border-bottom-left-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        h1,
        h2,
        h3,
        h4,
        .font-display {
            font-family: 'Outfit', sans-serif;
        }
    </style>


    <!-- Quill.js CDN -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

    {% block extra_head %}{% endblock %}
</head>

<body class="bg-gray-50 flex min-h-screen {% block body_class %}{% endblock %}" x-data="{ sidebarOpen: false }">
    <!-- Sidebar -->
    {% block sidebar %}
        {% include '_sidebar.html' %}
    {% endblock %}

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col min-w-0">
        <!-- Top Navigation -->
        {% block top_nav %}
        <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 sticky top-0 z-40">
            <div class="flex items-center lg:hidden space-x-4">
                <!-- Hamburger Menu Button -->
                <button @click="sidebarOpen = !sidebarOpen" class="text-slate-600 hover:text-nigeria-green transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                
                <div class="w-8 h-8 bg-nigeria-green rounded flex items-center justify-center font-bold text-white">N
                </div>
                <span class="text-lg font-bold tracking-tight">PIMS</span>
            </div>

            <div class="flex items-center ml-auto space-x-6">
                <!-- Notifications -->
                <div class="relative">
                    <a href="{% url 'notifications:notification_list' %}"
                        class="text-slate-400 hover:text-nigeria-green transition-colors relative">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9">
                            </path>
                        </svg>
                        {% if unread_notifications_count > 0 %}
                        <span
                            class="absolute -top-1.5 -right-1.5 w-4 h-4 bg-red-500 rounded-full text-[9px] font-black text-white flex items-center justify-center border-2 border-white">{{
                            unread_notifications_count }}</span>
                        {% endif %}
                    </a>
                </div>

                <div class="h-8 w-px bg-gray-200"></div>

                <div class="flex items-center space-x-3">
                    <div class="text-right hidden sm:block">
                        <p class="text-xs font-bold text-gray-900">{{ user.staff.get_full_name|default:user.username }}
                        </p>
                        <p class="text-[9px] font-bold text-nigeria-green uppercase tracking-widest">{{ user.staff.designation.name }}</p>
                    </div>
                </div>
            </div>
        </header>
        {% endblock %}

        <!-- Page Content -->
        <div class="p-8 lg:py-4 mx-auto w-full flex-1">
            {% block content %}{% endblock %}
        </div>

        <!-- Footer -->
        {% block footer %}
        <footer
            class="p-8 text-center text-[10px] font-bold text-slate-400 uppercase tracking-widest border-t border-gray-100 italic">
            Federal Republic of Nigeria • Sovereign Personnel Registry • End-to-End Governance Security
        </footer>
        {% endblock %}
    </main>

    {% block extra_modals %}{% endblock %}
    {% block extra_js %}{% endblock %}
</body>

</html>