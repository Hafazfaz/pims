<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="staff-dashboard.css?v=100">
    <link rel="stylesheet" href="staff-activation-styles.css?v=100">
    <link rel="stylesheet" href="../components/notification-center.css">
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-user-circle" style="font-size: 1.8rem; color: var(--success-color);"></i>
                <div>
                    <h2>Staff Panel</h2>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#" class="active" data-section="upload-files"><i class="fas fa-cloud-upload-alt"></i>
                            Upload Files</a></li>
                    <li><a href="#" data-section="my-files"><i class="fas fa-folder-open"></i> My Files</a></li>
                    <li><a href="#" data-section="track-flow"><i class="fas fa-project-diagram"></i> Track Flow</a></li>
                    <li><a href="#" data-section="profile"><i class="fas fa-user-cog"></i> Profile</a></li>
                    <li><a href="#" id="logout-btn" style="color: #ef4444;"><i class="fas fa-sign-out-alt"></i>
                            Logout</a></li>
                </ul>
            </nav>
        </aside>
        <main class="main-content">
            <header class="navbar">
                <h1>Welcome, <span id="welcomeName">Staff Member</span>!</h1>
                <div class="user-info">
                    <span id="headerUserName">John Doe</span>
                    <div class="avatar"
                        style="background: var(--primary-color); color: #fff; display: flex; align-items: center; justify-content: center; font-weight: bold;">
                        JD</div>
                </div>
            </header>

            <section id="upload-files" class="dashboard-section active">
                <h2><i class="fas fa-file-upload"></i> Upload New Files</h2>
                <div class="card">
                    <h3>Single File Upload</h3>
                    <form id="single-upload-form" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="single-file">Select File:</label>
                            <input type="file" id="single-file" name="file" required>
                        </div>
                        <div class="form-group">
                            <label for="single-file-category">Category:</label>
                            <select id="single-file-category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="personal">Personal</option>
                                <option value="policy">Policy</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="text" id="single-file-department" name="department" placeholder="e.g., HR"
                                required>
                            <label for="single-file-hod">HOD:</label>
                            <select id="single-file-hod" name="hod_id" required>
                                <option value="">Select HOD</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary"><i class="fas fa-upload"></i> Upload File</button>
                    </form>
                </div>

                <div class="card mt-4">
                    <h3>Bulk File Upload</h3>
                    <form id="bulk-upload-form" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="bulk-files">Select Multiple Files:</label>
                            <input type="file" id="bulk-files" name="files" multiple required>
                        </div>
                        <div class="form-group">
                            <label for="bulk-file-category">Category (for all files):</label>
                            <select id="bulk-file-category" name="category" required>
                                <option value="">Select Category</option>
                                <option value="personal">Personal</option>
                                <option value="policy">Policy</option>
                            </select>
                        </div>
                        <label for="bulk-file-hod">HOD:</label>
                        <select id="bulk-file-hod" name="hod_id" required>
                            <option value="">Select HOD</option>
                        </select>
                        <label for="bulk-file-department">Department:</label>
                        <input type="text" id="bulk-file-department" name="department" placeholder="e.g., HR" required>
                        <button type="submit" class="btn-primary"><i class="fas fa-layer-group"></i> Bulk
                            Upload</button>
                    </form>
                </div>
            </section>

            <section id="my-files" class="dashboard-section">
                <h2><i class="fas fa-folder"></i> My Uploaded Files</h2>
                <div class="card">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>File Number</th>
                                <th>File Name</th>
                                <th>Category</th>
                                <th>State</th>
                                <th>Current Location</th>
                                <th>Status</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="my-files-tbody">
                            <tr>
                                <td colspan="8" style="text-align: center; color: #94a3b8;">Loading files...</td>
                            </tr>!-- File rows will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="track-flow" class="dashboard-section">
                <h2><i class="fas fa-search-location"></i> Track Document Flow</h2>
                <div class="card">
                    <div class="form-group">
                        <label for="track-file-id">Enter File ID or Name:</label>
                        <input type="text" id="track-file-id" placeholder="File ID or Name">
                        <button class="btn-primary mt-2" id="search-flow-btn"><i class="fas fa-search"></i> Track
                            Flow</button>
                    </div>
                    <div id="flow-details" class="mt-4"
                        style="background: #f8fafc; padding: 20px; border-radius: 12px;">
                        <!-- Document flow details will be loaded here by JavaScript -->
                        <p style="color: var(--text-muted); text-align: center;">Select a file from "My Files" or enter
                            a File ID/Name to see its flow.</p>
                    </div>
                </div>
            </section>

            <section id="profile" class="dashboard-section">
                <h2><i class="fas fa-id-card"></i> My Profile</h2>
                <div class="card">
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                        <div class="avatar"
                            style="width: 80px; height: 80px; background: var(--primary-color); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold;">
                            JD</div>
                        <div>
                            <h3 style="margin: 0;">John Doe</h3>
                            <span style="color: var(--text-muted);">Staff Member</span>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" id="profile-email" value="john.doe@example.com" readonly>
                        </div>
                        <div class="form-group">
                            <label>Department</label>
                            <input type="text" id="profile-dept" value="Human Resources" readonly>
                        </div>
                    </div>
                    <button class="btn-secondary"><i class="fas fa-edit"></i> Edit Profile</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Activation Request Modal -->
    <div id="activation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Request File Activation</h3>
                <button class="close-btn" onclick="closeActivationModal()">×</button>
            </div>
            <div class="modal-body">
                <p>File: <strong id="activation-file-name"></strong></p>
                <p>File Number: <strong id="activation-file-number"></strong></p>
                <div class="form-group" style="margin-top: 1rem;">
                    <label for="activation-reason">Reason for Activation *</label>
                    <textarea id="activation-reason" rows="4"
                        placeholder="Please provide a reason for activating this file..." required></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeActivationModal()">Cancel</button>
                <button class="btn-primary" onclick="submitActivationRequest()">
                    <i class="fas fa-check"></i> Submit Request
                </button>
            </div>
        </div>
    </div>

    <!-- File Details Modal -->
    <div id="file-details-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>File Details</h3>
                <button class="close-btn" onclick="closeFileDetailsModal()">×</button>
            </div>
            <div class="modal-body">
                <div class="file-info-card"
                    style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div>
                            <p class="text-muted">File Number</p>
                            <strong id="detail-file-number"></strong>
                        </div>
                        <div>
                            <p class="text-muted">File Name</p>
                            <strong id="detail-file-name"></strong>
                        </div>
                        <div>
                            <p class="text-muted">State</p>
                            <span id="detail-file-state" class="badge"></span>
                        </div>
                        <div>
                            <p class="text-muted">Current Location</p>
                            <strong id="detail-file-location"></strong>
                        </div>
                    </div>
                </div>

                <div class="documents-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h4>Documents</h4>
                        <button id="create-doc-btn" class="btn-primary btn-sm" onclick="openCreateDocumentModal()">
                            <i class="fas fa-plus"></i> Create Document
                        </button>
                    </div>
                    <table class="data-table" style="font-size: 0.9rem;">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Type</th>
                                <th>Created By</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="documents-tbody">
                            <tr>
                                <td colspan="5" class="text-center">Loading documents...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Document Modal -->
    <div id="create-document-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Document</h3>
                <button class="close-btn" onclick="closeCreateDocumentModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="create-document-form">
                    <input type="hidden" id="doc-file-id">
                    <div class="form-group">
                        <label for="doc-title">Document Title *</label>
                        <input type="text" id="doc-title" required placeholder="e.g., Application for Leave">
                    </div>
                    <div class="form-group">
                        <label for="doc-type">Document Type *</label>
                        <select id="doc-type" required>
                            <option value="minute">Minute</option>
                            <option value="memo">Memo</option>
                            <option value="letter">Letter</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="doc-content">Content *</label>
                        <textarea id="doc-content" rows="6" required placeholder="Enter document content..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeCreateDocumentModal()">Cancel</button>
                <button class="btn-primary" onclick="submitCreateDocument()">
                    <i class="fas fa-save"></i> Create Document
                </button>
            </div>
        </div>
    </div>

    <script src="staff-dashboard.js?v=100"></script>
</body>

</html>