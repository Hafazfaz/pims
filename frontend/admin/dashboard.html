<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="dashboard-new.css">
    <link rel="stylesheet" href="../components/notification-center.css">
</head>

<body data-user-role="admin">
    <div class="dashboard-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="img/fmc.png" alt="Logo" class="logo">
                <h2>Admin Panel</h2>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#dashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard Overview</a>
                </li>
                <li><a href="#staff-management"><i class="fas fa-users"></i> Staff Management</a></li>
                <li><a href="#roles-permissions"><i class="fas fa-user-tag"></i> Roles & Permissions</a></li>
                <li><a href="#departments-units"><i class="fas fa-building"></i> Departments & Units</a></li>
                <li><a href="file-management.html"><i class="fas fa-folder"></i> File Management</a></li>
                <li><a href="#document-flow"><i class="fas fa-project-diagram"></i> Document Flow Management</a></li>
                <li><a href="#access-control"><i class="fas fa-shield-alt"></i> Access Control & Security</a></li>
                <li><a href="#reports-analytics"><i class="fas fa-chart-line"></i> Reports & Analytics</a></li>
                <li><a href="#notifications-alerts"><i class="fas fa-bell"></i> Notifications & Alerts</a></li>
                <li><a href="#audit-logs"><i class="fas fa-clipboard-list"></i> Audit Logs</a></li>
            </ul>
        </nav>
        <main class="main-content">
            <header class="main-header">
                <div class="hamburger"></div>
                <h1 id="welcome-message">Welcome, Admin</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" id="create-user-btn"><i class="fas fa-user-plus"></i> Create
                        User</button>
                    <button class="btn btn-danger" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </header>

            <!-- Dashboard Overview Section -->
            <section id="dashboard" class="content-section active">
                <h2>Dashboard Overview</h2>
                <div class="dashboard-cards">
                    <div class="card">
                        <h3>Total Users</h3>
                        <p></p>
                    </div>
                    <div class="card">
                        <h3>Active Files</h3>
                        <p id="active-files-count">Loading...</p>
                    </div>
                    <div class="card">
                        <h3>Pending Approvals</h3>
                        <p id="pending-approvals-count">Loading...</p>
                    </div>
                    <div class="card">
                        <h3>Overdue Tasks</h3>
                        <p id="overdue-tasks-count">Loading...</p>
                    </div>
                </div>

                <div class="charts-grid"
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div class="chart-container"
                        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <h3>Files per Department</h3>
                        <canvas id="deptChart"></canvas>
                    </div>
                    <div class="chart-container"
                        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <h3>File Creation Trends (Last 7 Days)</h3>
                        <canvas id="trendChart"></canvas>
                    </div>
                    <div class="chart-container"
                        style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <h3>File Status Distribution</h3>
                        <canvas id="statusChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Staff Management Section -->
            <section id="staff-management" class="content-section">
                <h2>Staff Management</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="openModal('create-user-modal')"><i
                            class="fas fa-user-plus"></i> Add New User</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Staff data will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Roles & Permissions Section -->
            <section id="roles-permissions" class="content-section">
                <h2>Roles & Permissions</h2>
                <div class="header-actions">
                    <button class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create New Role</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Role Name</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Role data will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Departments & Units Section -->
            <section id="departments-units" class="content-section">
                <h2>Departments & Units</h2>
                <div class="header-actions">
                    <div class="search-container">
                        <input type="text" id="department-search" placeholder="Search for departments...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('add-department-modal')"><i
                            class="fas fa-plus-circle"></i> Add New Department</button>
                </div>
                <div class="table-container">
                    <table id="departments-table">
                        <thead>
                            <tr>
                                <th>Department Name</th>
                                <th>Code</th>
                                <th>Head</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Department data will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="organogram-container">
                    <h3>Organizational Structure</h3>
                    <div class="organogram-tree">
                        <ul>
                            <li>
                                <a href="#" class="node-root">
                                    <div class="node-content">
                                        <i class="fas fa-building"></i>
                                        <span>Director General</span>
                                    </div>
                                </a>
                                <ul>
                                    <li>
                                        <a href="#" class="node-level-1">
                                            <div class="node-content">
                                                <i class="fas fa-user-tie"></i>
                                                <span>Admin Dept</span>
                                            </div>
                                        </a>
                                        <ul>
                                            <li>
                                                <a href="#" class="node-level-2">
                                                    <div class="node-content">
                                                        <i class="fas fa-users"></i>
                                                        <span>HR Unit</span>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#" class="node-level-2">
                                                    <div class="node-content">
                                                        <i class="fas fa-users"></i>
                                                        <span>Finance Unit</span>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#" class="node-level-1">
                                            <div class="node-content">
                                                <i class="fas fa-laptop-code"></i>
                                                <span>IT Dept</span>
                                            </div>
                                        </a>
                                        <ul>
                                            <li>
                                                <a href="#" class="node-level-2">
                                                    <div class="node-content">
                                                        <i class="fas fa-server"></i>
                                                        <span>Infra Unit</span>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Document Flow Management Section -->
            <section id="document-flow" class="content-section">
                <h2>Document Flow Management</h2>
                <p>Configure and track document workflows.</p>
                <a href="workflow-management.html" class="btn btn-primary"><i class="fas fa-external-link-alt"></i> Go
                    to Workflow Management</a>
            </section>

            <!-- Access Control & Security Section -->
            <section id="access-control" class="content-section">
                <h2>Access Control & Security</h2>
                <p>Manage system access, permissions, and security settings.</p>
                <a href="access-control.html" class="btn btn-primary"><i class="fas fa-external-link-alt"></i> Go to
                    Access Control</a>
            </section>

            <!-- Reports & Analytics Section -->
            <section id="reports-analytics" class="content-section">
                <h2>Reports & Analytics</h2>
                <p>Generate and view various system reports.</p>
                <a href="reports.html" class="btn btn-primary"><i class="fas fa-external-link-alt"></i> Go to
                    Reports</a>
            </section>

            <!-- Notifications & Alerts Section -->
            <section id="notifications-alerts" class="content-section">
                <h2>Notifications & Alerts</h2>
                <p>Manage system notifications and alerts.</p>
                <!-- Placeholder for notification settings -->
            </section>

            <!-- Audit Logs Section -->
            <section id="audit-logs" class="content-section">
                <h2>Audit Logs</h2>
                <p>Review all system activities and changes.</p>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Timestamp</th>
                                <th>User</th>
                                <th>Action</th>
                                <th>Details</th>
                                <th>IP Address</th>
                            </tr>
                        </thead>
                        <tbody id="audit-logs-table-body">
                            <!-- Audit logs will be loaded here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <!-- Create User Modal -->
    <div id="create-user-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('create-user-modal')">&times;</span>
            <div class="modal-header">
                <h2>Create New User</h2>
            </div>
            <div class="modal-body">
                <div class="tab-navigation">
                    <button class="tab-link active" onclick="openTab(event, 'single-user')"><i class="fas fa-user"></i>
                        Single User</button>
                    <button class="tab-link" onclick="openTab(event, 'bulk-upload')"><i class="fas fa-users"></i> Bulk
                        Upload</button>
                </div>

                <!-- Single User Form -->
                <div id="single-user" class="tab-content" style="display: block;">
                    <form id="create-user-form">
                        <div class="form-group">
                            <label for="new-username"><i class="fas fa-user"></i> Username:</label>
                            <input type="text" id="new-username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="new-email"><i class="fas fa-envelope"></i> Email:</label>
                            <input type="email" id="new-email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="new-password"><i class="fas fa-lock"></i> Password:</label>
                            <input type="password" id="new-password" name="password" required>
                        </div>
                        <div class="form-group">
                            <label for="new-role"><i class="fas fa-user-tag"></i> Role:</label>
                            <select id="new-role" name="role" required>
                                <option value="">-- Loading roles... --</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create
                            User</button>
                    </form>
                </div>

                <!-- Bulk Upload Form -->
                <div id="bulk-upload" class="tab-content">
                    <p>Upload a CSV file with user data. The file should have columns: <strong>Username, Email,
                            Password, Role</strong>.</p>
                    <div class="form-group">
                        <label for="csv-file"><i class="fas fa-file-csv"></i> Choose CSV File:</label>
                        <input type="file" id="csv-file" name="csv-file" accept=".csv">
                    </div>
                    <div class="form-group">
                        <a href="/path/to/sample.csv" download class="download-template">
                            <i class="fas fa-download"></i> Download CSV Template
                        </a>
                    </div>
                    <button type="button" class="btn btn-primary" id="bulk-upload-btn"><i class="fas fa-upload"></i>
                        Upload and Create Users</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="toast"></div>

    <!-- Add Department Modal -->
    <div id="add-department-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('add-department-modal')">&times;</span>
            <div class="modal-header">
                <h2>Add New Department</h2>
            </div>
            <div class="modal-body">
                <form id="add-department-form">
                    <div class="form-group">
                        <label for="department-name"><i class="fas fa-building"></i> Department Name:</label>
                        <input type="text" id="department-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="department-code"><i class="fas fa-barcode"></i> Department Code:</label>
                        <input type="text" id="department-code" name="code" required>
                    </div>
                    <div class="form-group">
                        <label for="department-head"><i class="fas fa-user-tie"></i> Department Head:</label>
                        <select id="department-head" name="head_id">
                            <!-- Staff will be loaded here by JavaScript -->
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Add
                        Department</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="edit-user-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('edit-user-modal')">&times;</span>
            <div class="modal-header">
                <h2>Edit User</h2>
            </div>
            <div class="modal-body">
                <form id="edit-user-form">
                    <input type="hidden" id="edit-user-id" name="id">
                    <div class="form-group">
                        <label for="edit-username"><i class="fas fa-user"></i> Username:</label>
                        <input type="text" id="edit-username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-email"><i class="fas fa-envelope"></i> Email:</label>
                        <input type="email" id="edit-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-role"><i class="fas fa-user-tag"></i> Role:</label>
                        <select id="edit-role" name="role">
                            <option value="staff">Staff</option>
                            <option value="hod">HOD</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                </form>
            </div>
        </div>
    </div>


    <!-- Edit Department Modal -->
    <div id="edit-department-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('edit-department-modal')">&times;</span>
            <div class="modal-header">
                <h2>Edit Department</h2>
            </div>
            <div class="modal-body">
                <form id="edit-department-form">
                    <input type="hidden" id="edit-department-id" name="id">
                    <div class="form-group">
                        <label for="edit-department-name"><i class="fas fa-building"></i> Department Name:</label>
                        <input type="text" id="edit-department-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-department-code"><i class="fas fa-barcode"></i> Department Code:</label>
                        <input type="text" id="edit-department-code" name="code" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-department-head"><i class="fas fa-user-tie"></i> Department Head:</label>
                        <select id="edit-department-head" name="head_id">
                            <!-- Staff will be loaded here by JavaScript -->
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Reassign Head Modal -->
    <div id="reassign-head-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('reassign-head-modal')">&times;</span>
            <div class="modal-header">
                <h2>Reassign Department Head</h2>
            </div>
            <div class="modal-body">
                <form id="reassign-head-form">
                    <input type="hidden" id="reassign-department-id" name="id">
                    <div class="form-group">
                        <label for="reassign-department-select"><i class="fas fa-building"></i> Department:</label>
                        <select id="reassign-department-select" name="department_id" disabled>
                            <!-- Departments will be loaded here by JavaScript -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reassign-new-head"><i class="fas fa-user-tie"></i> New Department Head:</label>
                        <select id="reassign-new-head" name="new_head_id">
                            <!-- Staff will be loaded here by JavaScript -->
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-user-tie"></i> Reassign Head</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Role Modal -->
    <div id="create-role-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('create-role-modal')">&times;</span>
            <div class="modal-header">
                <h2>Create New Role</h2>
            </div>
            <div class="modal-body">
                <form id="create-role-form">
                    <div class="form-group">
                        <label for="new-role-name"><i class="fas fa-tag"></i> Role Name:</label>
                        <input type="text" id="new-role-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="new-role-description"><i class="fas fa-info-circle"></i> Description:</label>
                        <textarea id="new-role-description" name="description"></textarea>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-shield-alt"></i> Permissions:</label>
                        <div id="new-role-permissions" class="permissions-checkbox-group">
                            <!-- Permissions will be loaded here by JavaScript -->
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Create
                        Role</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Role Modal -->
    <div id="edit-role-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('edit-role-modal')">&times;</span>
            <div class="modal-header">
                <h2>Edit Role</h2>
            </div>
            <div class="modal-body">
                <form id="edit-role-form">
                    <input type="hidden" id="edit-role-id" name="id">
                    <div class="form-group">
                        <label for="edit-role-name"><i class="fas fa-tag"></i> Role Name:</label>
                        <input type="text" id="edit-role-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-role-description"><i class="fas fa-info-circle"></i> Description:</label>
                        <textarea id="edit-role-description" name="description"></textarea>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-shield-alt"></i> Permissions:</label>
                        <div id="edit-role-permissions" class="permissions-checkbox-group">
                            <!-- Permissions will be loaded here by JavaScript -->
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                </form>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../components/notification-center.js"></script>
    <script src="dashboard.js?v=101"></script>
</body>

</html>